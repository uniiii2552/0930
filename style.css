:root{
  --brand:#9a6700; --brand-light:rgba(154,103,0,.1); --danger:#ef4444;
  --bg:#D6C88E; --card:#fffcf5; --border:#f0e9d9; --card-selected:#fff4d4;
  --text:#44403c; --muted:#78716c;
  --radius-sm:8px; --radius-md:12px; --radius-lg:16px;
  --shadow-sm:0 1px 2px rgba(0,0,0,.05);
  --shadow-md:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -2px rgba(0,0,0,.1);
  --shadow-lg:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -4px rgba(0,0,0,.1);
  --hero-h:64px;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;font-family:"Noto Sans TC",system-ui,-apple-system,Segoe UI,Roboto,
  "Helvetica Neue",Arial,"PingFang TC","Microsoft JhengHei",sans-serif;
  color:var(--text);background:var(--bg);
  -webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;
}

/* 只有圖片的 hero（不顯示文字） */
.hero{
  position:relative;display:flex;align-items:center;justify-content:center;
  padding:8px 12px;background:rgba(253,250,242,.85);
  backdrop-filter:blur(6px);-webkit-backdrop-filter:blur(6px);
  border-bottom:1px solid var(--border);height:var(--hero-h);
}
.hero-logo{height:calc(var(--hero-h) - 16px);width:auto;border-radius:8px;box-shadow:var(--shadow-sm)}

/* 版面與地圖高度（避免地圖消失） */
.container{height:calc(100vh - var(--hero-h));display:flex;flex-direction:column}
.content{position:relative;flex:1;min-height:0}
#map{position:absolute;inset:0;width:100%;height:100%;z-index:1}

/* 上方下拉工具列（避免與 hero 重疊：top 使用 hero 高度） */
.top-bar{
  position:absolute;top:calc(var(--hero-h) + 8px);left:calc(360px + 20px);right:20px;z-index:30;
  padding:8px 10px;background:rgba(255,252,245,.9);
  border:1px solid var(--border);border-radius:var(--radius-lg);box-shadow:var(--shadow-md)
}
.top-bar-inner{display:flex;gap:8px;align-items:center}
.quick-select,.top-bar select,.top-bar button{
  padding:10px 12px;font-size:14px;border:1px solid var(--border);
  border-radius:var(--radius-sm);background:#fff
}
.quick-actions{display:flex;gap:8px}
button{cursor:pointer;background:var(--brand);color:#fff;border:none;font-weight:600}
button:hover{filter:brightness(1.08)}
.btn-ghost{background:var(--card);color:var(--text);border:1px solid var(--border)}
.btn-danger{background:var(--danger);color:#fff}

/* 側欄（桌機可收合） */
.sidebar{
  position:absolute;top:calc(var(--hero-h) + 16px);left:20px;z-index:20;width:360px;
  background:var(--card);border:1px solid var(--border);border-radius:var(--radius-lg);
  padding:8px 8px 16px;box-shadow:var(--shadow-lg);
  max-height:calc(100% - var(--hero-h) - 32px);overflow:auto;transition:transform .28s ease
}
.sidebar.collapsed{transform:translateX(calc(-100% - 20px))}
.sidebar h2{font-size:20px;font-weight:700;padding:12px 16px 8px;margin:0;color:var(--brand)}
.sidebar h3{font-size:16px;font-weight:600;padding:4px 16px 8px;margin:12px 0 0;border-top:1px solid var(--border)}
.sidebar .box{border:none;box-shadow:none;padding:0 16px}
.selected.box{background:var(--bg);padding:0 16px 16px;margin-top:4px;border-radius:var(--radius-md)}

label{display:block;margin-bottom:6px;font-size:14px;font-weight:500}
.filters label{display:inline-block;margin-bottom:8px;font-weight:400}
.button-row{display:grid;grid-template-columns:repeat(auto-fit,minmax(80px,1fr));gap:8px;margin-top:8px}
.filter-actions{display:flex;gap:8px;margin-top:8px}

/* 已選行程 */
.sortable-list{list-style:decimal inside;padding:8px;margin:10px 0;border-radius:8px;background:var(--bg)}
.sortable-list li{
  display:flex;align-items:center;gap:8px;padding:12px;border-radius:var(--radius-md);
  box-shadow:var(--shadow-sm);background:var(--card);border:1px solid var(--border)
}
.sortable-list .name{flex:1 1 auto;min-width:0;font-weight:500;margin-right:auto}
.sortable-list .staywrap{display:flex;align-items:center;gap:6px;flex-shrink:0}
.sortable-list input.stay{width:60px;text-align:center}

/* Toast */
.toast{
  position:fixed;left:50%;bottom:24px;transform:translateX(-50%) translateY(20px);
  background:rgba(33,33,33,.95);color:#fff;padding:12px 18px;border-radius:var(--radius-md);
  font-size:14px;opacity:0;pointer-events:none;transition:opacity .2s,transform .2s;z-index:1000;box-shadow:var(--shadow-lg)
}
.toast.show{opacity:1;transform:translateX(-50%) translateY(0)}

/* 右上角 FAB（不擋地圖） */
.fab{
  position:absolute;top:calc(var(--hero-h) + 8px);right:20px;z-index:40;
  display:inline-flex;align-items:center;justify-content:center;
  width:44px;height:44px;border-radius:9999px;background:var(--brand);color:#fff;border:none;box-shadow:var(--shadow-lg)
}

/* 手機：抽屜 + 工具列縮進 */
@media (max-width:768px){
  :root{--hero-h:56px}
  .top-bar{left:16px;right:16px}
  .sidebar{
    position:fixed;top:0;left:0;width:88vw;max-width:360px;height:100vh;max-height:100vh;
    border-radius:0;border:none;transform:translateX(-100%);z-index:40
  }
  .sidebar.open{transform:translateX(0)}
  .backdrop{
    display:block;position:fixed;inset:0;background:rgba(0,0,0,.4);
    z-index:35;opacity:0;visibility:hidden;pointer-events:none;transition:opacity .25s,visibility .25s
  }
  .backdrop.show{opacity:1;visibility:visible;pointer-events:auto}
}

/* 可存取的隱藏（保留 checkbox 行） */
.visually-hidden{position:absolute!important;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0 0 0 0);white-space:nowrap;border:0}
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,1px,1px);white-space:nowrap;border:0}
